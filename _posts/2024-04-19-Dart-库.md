---
layout: post
title:  "Dart学习：库"
categories: Dart
tags: 库类接口继承
author: MLM
---
# [库 lib](https://ducafecat.com/course/dart-learn/dart-24-lib#%E5%BA%93-lib)

## [导入核心库](https://ducafecat.com/course/dart-learn/dart-24-lib#%E5%AF%BC%E5%85%A5%E6%A0%B8%E5%BF%83%E5%BA%93)

```dart
import 'dart:io';

void main() {
  var f = new File('README.md');
  var content = f.readAsStringSync();
  print(content);
}

# Dart 语言学习示例
```

## [导入第三方库](https://ducafecat.com/course/dart-learn/dart-24-lib#%E5%AF%BC%E5%85%A5%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93)

* 编写 `pubspec.yaml`

```yml
dependencies:
  dio: ^4.0.6
```

* 执行拉取包命令

```sh
$ dart pub get
```

* 程序调用

```dart
import 'package:dio/dio.dart';

void main() async {
  Dio dio = Dio();
  Response<String> response =
      await dio.get("https://wpapi.ducafecat.tech/products/categories");
  print(response.data);
}

[{"id":34,"name":"Bag","slug":"bag","parent":0,"description":" ......
```

## [导入自己的 git 仓库](https://ducafecat.com/course/dart-learn/dart-24-lib#%E5%AF%BC%E5%85%A5%E8%87%AA%E5%B7%B1%E7%9A%84-git-%E4%BB%93%E5%BA%93)

* 编写 `pubspec.yaml`

```yml
dependencies:
  uuid:
    git:
      url: https://github.com/Daegalus/dart-uuid
      ref: master
```

* 执行拉取包命令

```sh
$ dart pub get
```

> 从 master 分支拉取

## [导入类文件](https://ducafecat.com/course/dart-learn/dart-24-lib#%E5%AF%BC%E5%85%A5%E7%B1%BB%E6%96%87%E4%BB%B6)

* phone.dart

```dart
class Phone {
  void call() {
    print('Phone is calling...');
  }
}

class Android {
  void playStore() {
    print('Google play store');
  }

  void call() {
    print('Android phone is calling...');
  }
}

class Ios {
  void appleStore() {
    print('Apply store');
  }

  void call() {
    print('Ios phone is calling...');
  }
}
```

* 实例

```dart
import 'package:dart_learn/phone.dart';

void main() {
  var p = Phone();
  p.call();
}

Phone is calling...
```

## [前缀&别名](https://ducafecat.com/course/dart-learn/dart-24-lib#%E5%89%8D%E7%BC%80%E5%88%AB%E5%90%8D)

```dart
import 'package:dart_learn/phone.dart' as pp;

void main() {
  var p = pp.Android();
  p.call();
  p.playStore();
}

Android phone is calling...
Google play store
```

## [筛选包内容](https://ducafecat.com/course/dart-learn/dart-24-lib#%E7%AD%9B%E9%80%89%E5%8C%85%E5%86%85%E5%AE%B9)

```dart
import 'package:dart_learn/phone.dart' show Ios;

void main() {
  var p = Ios();
  p.call();
  p.appleStore();
}

Ios phone is calling...
Apply store
```

> `hide` 筛掉某几个包 `show` 只使用某几个包

## [延迟载入](https://ducafecat.com/course/dart-learn/dart-24-lib#%E5%BB%B6%E8%BF%9F%E8%BD%BD%E5%85%A5)

```dart
import 'package:dart_learn/phone.dart' deferred as pp;

Future<void> main() async {
  await pp.loadLibrary();
  var p = pp.Android();
  p.call();
  p.playStore();
}

Android phone is calling...
Google play store
```

> `loadLibrary()` 方式在需要的时候载入包 可提高程序启动速度 用在不常使用的功能 用在载入时间过长的包
>
